BOOMR_start=new Date().getTime();(function(w){if(w.parent!==w&&document.getElementById('boomr-if-as')&&document.getElementById('boomr-if-as').nodeName.toLowerCase()==='script'){w=w.parent}var impl,boomr,k,d=w.document;if(w.BOOMR===undefined){w.BOOMR={}}BOOMR=w.BOOMR;if(BOOMR.version){return}BOOMR.version="0.9";BOOMR.window=w;impl={beacon_url:"",site_domain:w.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,'$1').toLowerCase(),user_ip:'',onloadfired:false,handlers_attached:false,events:{"page_ready":[],"page_unload":[],"dom_loaded":[],"visibility_changed":[],"before_beacon":[],"click":[]},vars:{},disabled_plugins:{},onclick_handler:function(ev){var target;if(!ev){ev=w.event}if(ev.target){target=ev.target}else if(ev.srcElement){target=ev.srcElement}if(target.nodeType===3){target=target.parentNode}if(target&&target.nodeName.toUpperCase()==="OBJECT"&&target.type==="application/x-shockwave-flash"){return}impl.fireEvent("click",target)},fireEvent:function(e_name,data){var i,h,e;if(!this.events.hasOwnProperty(e_name)){return false}e=this.events[e_name];for(i=0;i<e.length;i++){h=e[i];h[0].call(h[2],data,h[1])}return true},addListener:function(el,sType,fn){if(el.addEventListener){el.addEventListener(sType,fn,false)}else if(el.attachEvent){el.attachEvent("on"+sType,fn)}}};boomr={t_start:BOOMR_start,t_end:null,utils:{objectToString:function(o,separator){var value=[],k;if(!o||typeof o!=="object"){return o}if(separator===undefined){separator="\n\t"}for(k in o){if(Object.prototype.hasOwnProperty.call(o,k)){value.push(encodeURIComponent(k)+'='+encodeURIComponent(o[k]))}}return value.join(separator)},getCookie:function(name){if(!name){return null}name=' '+name+'=';var i,cookies;cookies=' '+d.cookie+';';if((i=cookies.indexOf(name))>=0){i+=name.length;cookies=cookies.substring(i,cookies.indexOf(';',i));return cookies}return null},setCookie:function(name,subcookies,max_age){var value,nameval,c,exp;if(!name||!impl.site_domain){return false}value=this.objectToString(subcookies,"&");nameval=name+'='+value;c=[nameval,"path=/","domain="+impl.site_domain];if(max_age){exp=new Date();exp.setTime(exp.getTime()+max_age*1000);exp=exp.toGMTString();c.push("expires="+exp)}if(nameval.length<4000){d.cookie=c.join('; ');return(value===this.getCookie(name))}return false},getSubCookies:function(cookie){var cookies_a,i,l,kv,cookies={};if(!cookie){return null}cookies_a=cookie.split('&');if(cookies_a.length===0){return null}for(i=0,l=cookies_a.length;i<l;i++){kv=cookies_a[i].split('=');kv.push("");cookies[decodeURIComponent(kv[0])]=decodeURIComponent(kv[1])}return cookies},removeCookie:function(name){return this.setCookie(name,{},0)},pluginConfig:function(o,config,plugin_name,properties){var i,props=0;if(!config||!config[plugin_name]){return false}for(i=0;i<properties.length;i++){if(config[plugin_name][properties[i]]!==undefined){o[properties[i]]=config[plugin_name][properties[i]];props++}}return(props>0)}},init:function(config){var i,k,properties=["beacon_url","site_domain","user_ip"];if(!config){config={}}for(i=0;i<properties.length;i++){if(config[properties[i]]!==undefined){impl[properties[i]]=config[properties[i]]}}if(config.log!==undefined){this.log=config.log}if(!this.log){this.log=function(){}}for(k in this.plugins){if(this.plugins.hasOwnProperty(k)){if(config[k]&&config[k].hasOwnProperty("enabled")&&config[k].enabled===false){impl.disabled_plugins[k]=1;continue}else if(impl.disabled_plugins[k]){delete impl.disabled_plugins[k]}if(typeof this.plugins[k].init==="function"){this.plugins[k].init(config)}}}if(impl.handlers_attached){return this}if(!impl.onloadfired&&(config.autorun===undefined||config.autorun!==false)){if(d.readyState&&d.readyState==="complete"){this.setImmediate(BOOMR.page_ready,null,null,BOOMR)}else{if(w.onpagehide||w.onpagehide===null){impl.addListener(w,"pageshow",BOOMR.page_ready)}else{impl.addListener(w,"load",BOOMR.page_ready)}}}impl.addListener(w,"DOMContentLoaded",function(){impl.fireEvent("dom_loaded")});(function(){var fire_visible=function(){impl.fireEvent("visibility_changed")};if(d.webkitVisibilityState){impl.addListener(d,"webkitvisibilitychange",fire_visible)}else if(d.msVisibilityState){impl.addListener(d,"msvisibilitychange",fire_visible)}else if(d.visibilityState){impl.addListener(d,"visibilitychange",fire_visible)}impl.addListener(d,"mouseup",impl.onclick_handler);if(!w.onpagehide&&w.onpagehide!==null){impl.addListener(w,"unload",function(){BOOMR.window=w=null})}}());impl.handlers_attached=true;return this},page_ready:function(){if(impl.onloadfired){return this}impl.fireEvent("page_ready");impl.onloadfired=true;return this},setImmediate:function(fn,data,cb_data,cb_scope){var cb=function(){fn.call(cb_scope||null,data,cb_data||{});cb=null};if(w.setImmediate){w.setImmediate(cb)}else if(w.msSetImmediate){w.msSetImmediate(cb)}else if(w.webkitSetImmediate){w.webkitSetImmediate(cb)}else if(w.mozSetImmediate){w.mozSetImmediate(cb)}else{setTimeout(cb,10)}},subscribe:function(e_name,fn,cb_data,cb_scope){var i,h,e,unload_handler;if(!impl.events.hasOwnProperty(e_name)){return this}e=impl.events[e_name];for(i=0;i<e.length;i++){h=e[i];if(h[0]===fn&&h[1]===cb_data&&h[2]===cb_scope){return this}}e.push([fn,cb_data||{},cb_scope||null]);if(e_name==='page_ready'&&impl.onloadfired){this.setImmediate(fn,null,cb_data,cb_scope)}if(e_name==='page_unload'){unload_handler=function(ev){if(fn){fn.call(cb_scope,ev||w.event,cb_data)}};if(w.onpagehide||w.onpagehide===null){impl.addListener(w,"pagehide",unload_handler)}else{impl.addListener(w,"unload",unload_handler)}impl.addListener(w,"beforeunload",unload_handler)}return this},addVar:function(name,value){if(typeof name==="string"){impl.vars[name]=value}else if(typeof name==="object"){var o=name,k;for(k in o){if(o.hasOwnProperty(k)){impl.vars[k]=o[k]}}}return this},removeVar:function(arg0){var i,params;if(!arguments.length){return this}if(arguments.length===1&&Object.prototype.toString.apply(arg0)==="[object Array]"){params=arg0}else{params=arguments}for(i=0;i<params.length;i++){if(impl.vars.hasOwnProperty(params[i])){delete impl.vars[params[i]]}}return this},sendBeacon:function(){var k,url,img,nparams=0;for(k in this.plugins){if(this.plugins.hasOwnProperty(k)){if(impl.disabled_plugins[k]){continue}if(!this.plugins[k].is_complete()){return this}}}impl.vars.v=BOOMR.version;impl.vars.u=d.URL.replace(/#.*/,'');if(w!==window){impl.vars["if"]=""}impl.fireEvent("before_beacon",impl.vars);if(!impl.beacon_url){return this}url=[];for(k in impl.vars){if(impl.vars.hasOwnProperty(k)){nparams++;url.push(encodeURIComponent(k)+"="+(impl.vars[k]===undefined||impl.vars[k]===null?'':encodeURIComponent(impl.vars[k])))}}url=impl.beacon_url+((impl.beacon_url.indexOf('?')>-1)?'&':'?')+url.join('&');BOOMR.debug("Sending url: "+url.replace(/&/g,"\n\t"));if(nparams){img=new Image();img.src=url}return this}};delete BOOMR_start;(function(){var make_logger=function(l){return function(m,s){this.log(m,l,"boomerang"+(s?"."+s:""));return this}};boomr.debug=make_logger("debug");boomr.info=make_logger("info");boomr.warn=make_logger("warn");boomr.error=make_logger("error")}());if(w.YAHOO&&w.YAHOO.widget&&w.YAHOO.widget.Logger){boomr.log=w.YAHOO.log}else if(w.Y&&w.Y.log){boomr.log=w.Y.log}else if(typeof console==="object"&&console.log!==undefined){boomr.log=function(m,l,s){console.log(s+": ["+l+"] "+m)}}for(k in boomr){if(boomr.hasOwnProperty(k)){BOOMR[k]=boomr[k]}}BOOMR.plugins=BOOMR.plugins||{}}(window));//Now we start built in plugins.
